<!doctype html>
<html><head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>
</head>
<body lang="en">



<div id="candidate">
    <form><input name="candidate" type="text"/></form>
    <ul></ul>
</div>

<script>
    var sockjs_url = '/sock';
    var sockjs = new SockJS(sockjs_url);

    sockjs.onopen    = function()  {

    };

    sockjs.onmessage = function(e) {
        var obj = e.data;
        var candidates = obj.candidates;
        var list = $.map(candidates, function (e, i) {
            return $("<li></li>").text(e);
        });

    };

    sockjs.onclose   = function()  {

    };

    var $candidate = $('#candidate form');
    $candidate.submit(function() {
        console.log('test');
        $.get('/addCandidate', {'candidate': $('input[name="candidate"]').val()}, function() {});
        return false;
    });

</script>
</body></html>